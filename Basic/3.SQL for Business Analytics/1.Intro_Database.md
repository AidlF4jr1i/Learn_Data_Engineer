# Memahami Database dan SQL

Berikut adalah panduan lengkap untuk memahami konsep dasar database dan cara berinteraksi dengannya menggunakan SQL. Penjelasan ini akan kita buat sederhana, interaktif, tapi tetap profesional.

---

### **1. Apa itu Database? üóÑÔ∏è**

* **Database** (Basis Data) adalah kumpulan data terstruktur yang disimpan secara sistematis agar mudah diolah, diakses, dan dikelola.
* Untuk mengelolanya, kita menggunakan **DBMS (Database Management System)**. Anggap DBMS ini sebagai "manajer" data. Contoh: MySQL, PostgreSQL, SQL Server.

---

### **2. Relational Database (RDBMS)**

* **Relational Database** adalah tipe database paling umum, di mana data disimpan dalam bentuk **tabel**.
* Tabel terdiri dari **baris (records)** dan **kolom (fields)**:

  * **Kolom**: atribut data (contoh: `Nama_Siswa`, `Kelas`).
  * **Baris**: satu entitas data (contoh: data lengkap siswa bernama 'Budi').

---

### **3. Analogi Sederhana: Lemari Arsip**

* **Server Database** ‚Üí Perpustakaan (gedung utama)
* **Database** ‚Üí Lemari arsip (misal: Lemari "Data Siswa")
* **Tabel** ‚Üí Laci di dalam lemari (misal: Laci "Siswa Kelas 10")
* **Baris (Record)** ‚Üí Map dalam laci (satu siswa lengkap)
* **Kolom (Field)** ‚Üí Isi map (Nama, Alamat, dll)

---

### **4. SQL (Structured Query Language)**

SQL adalah bahasa standar untuk berinteraksi dengan database: menambah, mengubah, menghapus, dan menampilkan data.

---

### **5. Perintah Dasar: `SELECT`**

* **Menampilkan semua kolom**:

```sql
SELECT * FROM Siswa;
```

* **Menampilkan kolom tertentu**:

```sql
SELECT Nama_Lengkap, Kelas FROM Siswa;
```

* **Membuat kolom kalkulasi (alias)**:

```sql
SELECT nama_produk, harga, harga * 0.1 AS ppn FROM Produk;
```

* **Membatasi hasil (`LIMIT`)**:

```sql
SELECT * FROM Siswa LIMIT 5;
```

* **Menampilkan nilai unik (`DISTINCT`)**:

```sql
SELECT DISTINCT Kota_Asal FROM Siswa;
```

* **Mengurutkan hasil (`ORDER BY`)**:

```sql
SELECT * FROM Siswa ORDER BY Nama_Lengkap ASC;
SELECT * FROM Siswa ORDER BY Kelas DESC;
```

---

### **6. Menyaring Data dengan `WHERE`**

* **Operator perbandingan**:

```sql
SELECT * FROM employee WHERE birth_day > '1970-01-01';
```

* **Beberapa kondisi (`AND`, `OR`)**:

```sql
SELECT * FROM employee WHERE sex = 'male' AND salary > 75000;
```

* **Berdasarkan daftar (`IN`, `NOT IN`)**:

```sql
SELECT * FROM employee WHERE super_id IN (102, 106);
```

* **Pola teks (`LIKE`)**:

```sql
SELECT * FROM employee WHERE firstname LIKE 'J%';
```

* **Rentang nilai (`BETWEEN`)**:

```sql
SELECT * FROM employee WHERE salary BETWEEN 50000 AND 75000;
```

---

## **Aggregation, Grouping & Window Functions**

Saat menganalisis data, seringkali kita perlu menghitung **total**, **rata-rata**, atau **jumlah unik**. Di sinilah fungsi agregasi, grouping, dan window function berperan.

---

### **1. Aggregate Functions**

| Fungsi     | Keterangan      |
| ---------- | --------------- |
| AVG()      | Rata-rata       |
| COUNT()    | Jumlah data     |
| SUM()      | Total nilai     |
| MAX()      | Nilai maksimum  |
| MIN()      | Nilai minimum   |
| STDDEV()   | Standar deviasi |
| VARIANCE() | Varians         |

**Contoh (Tabel `tabel_cust`)**:

| custID | checkID | amount |
| ------ | ------- | ------ |
| 103    | HQ336   | 60     |
| 112    | JM555   | 74     |
| 112    | BO864   | 75     |
| 119    | DB933   | 14     |

* **Rata-rata pembayaran**:

```sql
SELECT AVG(amount) AS avg_pembelian FROM tabel_cust;
```

* **Jumlah customer unik**:

```sql
SELECT COUNT(DISTINCT custID) AS jmlh_user_fix FROM tabel_cust;
```

**Contoh lain (Tabel `shoes`)**:

| ShoeName     | Stocks | Profit |
| ------------ | ------ | ------ |
| AbabilStrong | 2304   | 2344   |
| Trek         | 5334   | 7455   |
| Fly          | 1023   | 5001   |
| Fast         | 3231   | 3123   |

```sql
SELECT AVG(Stocks) AS avgStock, AVG(Profit) AS avgProfit FROM shoes;
SELECT MIN(Profit) AS minProfit, MAX(Profit) AS maxProfit FROM shoes;
```

---

### **2. NULL dalam Fungsi Agregasi**

* Nilai `NULL` **tidak dihitung** dalam fungsi agregasi (kecuali `COUNT(*)`).
* Jika semua nilai `NULL`, hasil fungsi agregasi (AVG, SUM, MAX, dll.) adalah **NULL**.
* `COUNT(*)` akan tetap menghitung semua baris, termasuk `NULL`.

**Contoh (Tabel `pendapatan`)**:

| Nama  | Gender | Income |
| ----- | ------ | ------ |
| Anton | Male   | NULL   |
| Arga  | NULL   | 7455   |
| Lina  | NULL   | 5001   |
| NULL  | Female | 3123   |

```sql
SELECT AVG(Income) AS avgIncome FROM pendapatan;
```

Hasil: `(7455 + 5001 + 3123) / 3 = 5193`

---

### **3. Grouping (`GROUP BY`)**

Grouping digunakan untuk mengelompokkan data berdasarkan nilai tertentu.

**Contoh (Tabel `medals`)**:

| Name  | Sport      | Country    | Medal |
| ----- | ---------- | ---------- | ----- |
| Dottu | Badminton  | Indonesia  | 3     |
| Nova  | Basketball | Indonesia  | 4     |
| Novo  | Basketball | Indonesia  | 2     |
| Baba  | Badminton  | Philippine | 3     |
| Bubu  | Badminton  | Indonesia  | 1     |
| Detto | Basketball | Philippine | 1     |
| Papi  | Badminton  | Philippine | 3     |
| Pepo  | Basketball | Philippine | 8     |

* **Total medali per negara**:

```sql
SELECT Country, SUM(Medal) AS ttl_Medal FROM medals GROUP BY Country;
```

* **Grouping lebih dari satu kolom (negara & cabor)**:

```sql
SELECT Country, Sport, SUM(Medal) AS ttl_Medal
FROM medals
GROUP BY Country, Sport;
```

* **Filter hasil grouping dengan `HAVING`**:

```sql
SELECT Country, Sport, SUM(Medal) AS ttl_Medal
FROM medals
GROUP BY Country, Sport
HAVING SUM(Medal) > 6;
```

---

## **4. Window Functions üñºÔ∏è**

Window Functions mirip agregasi, tapi **tidak meruntuhkan baris asli**. Data tetap detail per baris, hanya ditambah kolom hasil analisis.

**Sintaks umum:**

```sql
SELECT kolom, fungsi_agregasi(kolom) OVER (
    PARTITION BY kolom_partisi
    ORDER BY kolom_urutan
    frame_clause
)
FROM tabel;
```

* `PARTITION BY`: Membagi data menjadi sub-grup.
* `ORDER BY`: Menentukan urutan dalam grup.
* `Frame Clause`: Mendefinisikan jendela baris yang dihitung.

**Contoh (Tabel `temp`)**:

| City   | Date     | Temp |
| ------ | -------- | ---- |
| City A | 1/1/2001 | 25   |
| City B | 1/1/2001 | 22   |
| City A | 2/1/2001 | 30   |
| City B | 2/1/2001 | 27   |

* **Rata-rata per kota**:

```sql
SELECT City, Temp, AVG(Temp) OVER (PARTITION BY City) AS avgTempPerCity
FROM temp;
```

* **Running total penjualan**:

```sql
SELECT nama_produk, bulan, penjualan_bulanan,
       SUM(penjualan_bulanan) OVER (PARTITION BY nama_produk ORDER BY bulan) AS total_kumulatif
FROM penjualan;
```

---

### **5. Fungsi Ranking & Analytic**

| Fungsi         | Deskripsi                                   |
| -------------- | ------------------------------------------- |
| ROW_NUMBER()   | Nomor unik berurutan                        |
| RANK()         | Ranking dengan loncatan jika ada nilai sama |
| DENSE_RANK()   | Ranking tanpa loncatan                      |
| NTILE(n)       | Membagi data ke dalam `n` kelompok          |
| LAG()          | Ambil nilai baris sebelumnya                |
| LEAD()         | Ambil nilai baris berikutnya                |
| FIRST_VALUE()  | Ambil nilai pertama dalam frame             |
| LAST_VALUE()   | Ambil nilai terakhir dalam frame            |

---

‚úÖ Dengan ini, kamu sudah memahami dasar: **Database, SQL dasar (`SELECT`, `WHERE`, `ORDER BY`), Aggregation, Grouping, hingga Window Functions**.

---
